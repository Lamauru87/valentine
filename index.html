<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ChloÃ© ðŸ’– Veux-tu Ãªtre ma Valentine ?</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            text-align: center;
        }

        .container {
            color: white;
        }

        h1 {
            margin-bottom: 30px;
        }

        /* Zone fixe pour Ã©viter que le bouton Oui bouge le texte */
        .yes-wrapper {
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        button {
            font-size: 20px;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }

        #yesBtn {
            background-color: #4CAF50;
            color: white;
            transition: transform 0.3s ease;
        }

        #noBtn {
			background-color: #f44336;
			color: white;
			position: fixed; /* IMPORTANT */
			left: 0;
			top: 0;
			transform: translate(0px, 0px);
			transition: transform 0.25s ease-out;
		}


        #message {
            margin-top: 25px;
            font-size: 22px;
            min-height: 40px;
        }

        iframe {
            margin-top: 20px;
            border-radius: 15px;
        }

        /* Tremblement */
        @keyframes shake {
            0% { transform: translate(0); }
            20% { transform: translate(-5px, 5px); }
            40% { transform: translate(5px, -5px); }
            60% { transform: translate(-5px, -5px); }
            80% { transform: translate(5px, 5px); }
            100% { transform: translate(0); }
        }

        .shake {
            animation: shake 0.8s;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ChloÃ©, veux-tu Ãªtre ma Valentine ? ðŸ’˜</h1>

    <div class="yes-wrapper">
        <button id="yesBtn">Oui ðŸ’–</button>
    </div>

    <button id="noBtn">Non ðŸ’”</button>

    <div id="message"></div>
    <div id="gif"></div>
</div>

<!-- Violon triste -->
<audio id="sadViolin" loop>
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c8a84c4d3.mp3" type="audio/mpeg">
</audio>

<script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const message = document.getElementById("message");
    const gif = document.getElementById("gif");
    const violin = document.getElementById("sadViolin");

    let yesScale = 1;
    let noScale = 1;
    let noClicks = 0;
    let violinStarted = false;

    const sadMessages = [
        "Cela me fend mon petit cÅ“ur ðŸ’”",
        "ChloÃ©â€¦ vraiment ? Tu me brises lâ€™Ã¢me ðŸ˜¢",
        "Je ne mâ€™en remettrai jamaisâ€¦ jamais ðŸ˜­",
        "MÃªme les poÃ¨tes pleurent en ce moment ðŸ¥€",
        "Mon cÅ“ur vient officiellement de se dÃ©sintÃ©grer ðŸ–¤",
        "Dis adieu Ã  lâ€™homme que jâ€™Ã©tais âš°ï¸",
        "Il pleutâ€¦ mais seulement sur mon cÅ“ur ðŸŒ§ï¸"
    ];

    // Position initiale du bouton NON
    let noX = window.innerWidth / 2 + 100;
let noY = window.innerHeight / 2;

function updateNoPosition() {
    noBtn.style.transform = `translate(${noX}px, ${noY}px) scale(${noScale})`;
}

updateNoPosition();

document.addEventListener("mousemove", (e) => {
    if (noBtn.style.display === "none") return;

    const mouseX = e.clientX;
    const mouseY = e.clientY;

    const rect = noBtn.getBoundingClientRect();
    const btnWidth = rect.width;
    const btnHeight = rect.height;

    const cx = rect.left + btnWidth / 2;
    const cy = rect.top + btnHeight / 2;

    const dist = Math.hypot(mouseX - cx, mouseY - cy);
    const fleeDistance = 130;

    if (dist < fleeDistance) {
        const angle = Math.atan2(cy - mouseY, cx - mouseX);

        noX += Math.cos(angle) * 40;
        noY += Math.sin(angle) * 40;

        // ðŸ”’ Limites Ã©cran STRICTES
        noX = Math.max(0, Math.min(window.innerWidth - btnWidth, noX));
        noY = Math.max(0, Math.min(window.innerHeight - btnHeight, noY));

        updateNoPosition();
    }
});

window.addEventListener("resize", () => {
    const rect = noBtn.getBoundingClientRect();
    noX = Math.max(0, Math.min(window.innerWidth - rect.width, noX));
    noY = Math.max(0, Math.min(window.innerHeight - rect.height, noY));
    updateNoPosition();
});


    // CLICK SUR NON
    noBtn.addEventListener("click", () => {

        if (!violinStarted) {
            violin.play();
            violinStarted = true;
        }

        if (noClicks < sadMessages.length) {
            message.textContent = sadMessages[noClicks];
        }

        noClicks++;

        yesScale += 0.3;
        yesScale = Math.min(yesScale, 2.5); // limite max
        noScale -= 0.15;

        yesBtn.style.transform = `scale(${yesScale})`;

        // Tremblement au 6Ã¨me clic
        if (noClicks === 6) {
            document.body.classList.add("shake");
            setTimeout(() => document.body.classList.remove("shake"), 800);
        }

        // Disparition EXACTEMENT au 7Ã¨me clic
        if (noClicks === 7) {
            noBtn.style.display = "none";
            message.textContent = "ðŸ«  Tu n'as plus le choixâ€¦";
        } else {
            noBtn.style.transform = `scale(${noScale})`;
        }
    });

    // CLICK SUR OUI
    yesBtn.addEventListener("click", () => {
        yesBtn.style.display = "none";
        message.textContent = "Youpi ! Tu viens de faire un homme heureux ! ðŸ’•";
        gif.innerHTML = `
            <iframe 
                src="https://tenor.com/embed/4144080903419147156"
                width="300"
                height="300"
                frameborder="0"
                allowfullscreen>
            </iframe>
        `;
        violin.pause();
        noBtn.style.display = "none";
        yesBtn.disabled = true;
    });
</script>

</body>
</html>

